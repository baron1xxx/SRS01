<div class="waiter__edit" *ngIf="restaurant">
  <div class="card__container">
    <div class="row card__waiter">
      <div class="col s12 m12">
        <div class="card">
          <div class="card-image">
            <img class="avatar" src="{{avatarHost}}/{{restaurant.id}}/{{restaurant.avatar}}">
          </div>
        </div>
      </div>
    </div>

    <a class="waves-effect waves-light blue-grey darken-1 btn btn__update-avatar" title="Update avatar"
       (click)="openModalUpdateAvatarForm()">
      <i class="material-icons left">add_a_photo</i>Update
    </a>
  </div>


  <div class="row">
    <form class="col s12 registration__form" [formGroup]="editRestaurant">

      <div *ngIf="errorMessage" class="collection invalid">
        {{errorMessage}}
      </div>
      <div *ngIf="successMessage" class="collection success">
        {{successMessage}}
      </div>

      <div class="input row">
        <div class="input-field col s12">
          <input type="text" class="validate" placeholder="Name" formControlName="name">

          <div class="alert alert-danger invalid"
               *ngIf="editRestaurant.get('name').invalid && editRestaurant.get('name').touched">
            <div *ngIf="editRestaurant.get('name').hasError('required')">
              Field required!
            </div>
            <div *ngIf="editRestaurant.get('name').hasError('minlength')">
              Min 3 character!
            </div>
            <div *ngIf="editRestaurant.get('name').hasError('maxlength')">
              Max 20 character!
            </div>
            <div *ngIf="editRestaurant.get('name').hasError('pattern')">
              Only letters and space!
            </div>
          </div>

        </div>
      </div>

      <div class="input row">
        <div class="input input-field col s12">
          <input type="text" class="validate" placeholder="Description" formControlName="description">

          <div class="alert alert-danger invalid"
               *ngIf="editRestaurant.get('description').invalid && editRestaurant.get('description').touched">
            <div *ngIf="editRestaurant.get('description').hasError('required')">
              Field required!
            </div>
            <div *ngIf="editRestaurant.get('description').hasError('minlength')">
              Min 3 character!
            </div>
            <div *ngIf="editRestaurant.get('description').hasError('maxlength')">
              Max 20 character!
            </div>
            <div *ngIf="editRestaurant.get('description').hasError('pattern')">
              Only letters and space!
            </div>
          </div>

        </div>
      </div>

      <div class="input row">

        <div class="input input-field col s6">
          <input type="text" class="validate" placeholder="Tel" formControlName="tel">
          <div class="alert alert-danger invalid"
               *ngIf="editRestaurant.get('tel').invalid && editRestaurant.get('tel').touched">
            <div *ngIf="editRestaurant.get('tel').hasError('required')">
              Field required!
            </div>
            <div *ngIf="editRestaurant.get('tel').hasError('pattern')">
              (000)0000000 /
              000-000-0000 /
              000 000 0000
            </div>
          </div>
        </div>

        <div class="input input-field input-field-region col s6">
          <input type="text" class="validate region_input" placeholder="Region" formControlName="region" id="region">

          <div class="collection collection_region" *ngIf="selectedRegion && regions">
            <a class="collection-item" *ngFor="let reg of regions" (click)="selectRegion(reg)">{{reg.region}}</a>
          </div>

          <div class="alert alert-danger invalid"
               *ngIf="editRestaurant.get('region').invalid && editRestaurant.get('region').touched">
            <div *ngIf="editRestaurant.get('region').hasError('required')">
              Field required!
            </div>
            <div *ngIf="editRestaurant.get('region').hasError('minlength')">
              Min 3 character!
            </div>
            <div *ngIf="editRestaurant.get('region').hasError('maxlength')">
              Max 20 character!
            </div>
            <div *ngIf="editRestaurant.get('region').hasError('pattern')">
              Only letters and space!
            </div>
          </div>
        </div>

      </div>

      <div class="input row">
        <div class="input input-field col s5">
          <input type="text" class="validate" placeholder="City" formControlName="city">

          <div class="collection collection_region" *ngIf="selectedCity && cities">
            <a class="collection-item" *ngFor="let city of cities" (click)="selectCity(city)">{{city.city}}</a>
          </div>

          <div class="alert alert-danger invalid"
               *ngIf="editRestaurant.get('city').invalid && editRestaurant.get('city').touched">
            <div *ngIf="editRestaurant.get('city').hasError('required')">
              Field required!
            </div>
            <div *ngIf="editRestaurant.get('city').hasError('minlength')">
              Min 3 character!
            </div>
            <div *ngIf="editRestaurant.get('city').hasError('maxlength')">
              Max 20 character!
            </div>
            <div *ngIf="editRestaurant.get('city').hasError('pattern')">
              Only letters and space!
            </div>
          </div>
        </div>

        <div class="input input-field col s5">
          <input type="text" class="validate" placeholder="Street" formControlName="street">
          <div class="collection collection_region" *ngIf="selectedStreet && streets">
            <a class="collection-item" *ngFor="let street of streets"
               (click)="selectStreet(street)">{{street.street}}</a>
          </div>
          <div class="alert alert-danger invalid"
               *ngIf="editRestaurant.get('street').invalid && editRestaurant.get('street').touched">
            <div *ngIf="editRestaurant.get('street').hasError('required')">
              Field required!
            </div>
            <div *ngIf="editRestaurant.get('street').hasError('minlength')">
              Min 3 character!
            </div>
            <div *ngIf="editRestaurant.get('street').hasError('maxlength')">
              Max 20 character!
            </div>
            <div *ngIf="editRestaurant.get('street').hasError('pattern')">
              Only letters and space!
            </div>
          </div>
        </div>

        <div class="input input-field col s2">
          <input type="text" class="validate" placeholder="House number" formControlName="houseNumber">
          <div class="alert alert-danger invalid"
               *ngIf="editRestaurant.get('houseNumber').invalid && editRestaurant.get('houseNumber').touched">
            <div *ngIf="editRestaurant.get('houseNumber').hasError('required')">
              Field required!
            </div>
            <div *ngIf="editRestaurant.get('houseNumber').hasError('minlength')">
              Min 3 character!
            </div>
            <div *ngIf="editRestaurant.get('houseNumber').hasError('maxlength')">
              Max 20 character!
            </div>
            <div *ngIf="editRestaurant.get('houseNumber').hasError('pattern')">
              Only letters and space!
            </div>
          </div>
        </div>

      </div>

      <div class="btn__auth">
        <button class="btn waves-effect waves-light btn-edit" type="submit" name="action"
                [disabled]="!editRestaurant.dirty || !editRestaurant.valid" (click)="updateRestaurant()">Edit
          <i class="material-icons right">edit</i>
        </button>
        <button class="btn waves-effect waves-light red darken-3 btn-cancel" type="submit" name="action"
                [routerLink]="['../..']">Back
          <i class="material-icons right">navigate_before</i>
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Modal Structure UPDATE AVATAR -->
<app-modal-window *ngIf="openModal" (click)="closeModalUpdateAvatarForm()"></app-modal-window>
  <div class="modal-container" *ngIf="openModal">
    <div class="file-field input-field">
      <div class="btn">
        <span>File</span>
        <input type="file" name="avatar" (change)="UploadFile($event)">
      </div>
      <div class="file-path-wrapper">
        <input *ngIf="selectFile" class="file-path validate" type="text" placeholder="{{selectFile.name}}">
        <input *ngIf="!selectFile" class="file-path validate" type="text" placeholder="Upload file">
      </div>
    </div>

    <div class="btn__auth">
      <button class="btn waves-effect waves-light btn-edit" type="submit" name="action"
              [disabled]="!selectFile" (click)="updateRestaurantAvatar()">Update avatar
        <i class="material-icons right">update</i>
      </button>
      <button class="btn waves-effect waves-light red darken-3 btn-cancel" type="submit" name="action"
              (click)="closeModalUpdateAvatarForm()">Cancel
        <i class="material-icons right">cancel</i>
      </button>
    </div>
  </div>
